parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KIzB":[function(require,module,exports) {
"use strict";function e(e,t,n,a,o,r,c){try{var s=e[r](c),i=s.value}catch(u){return void n(u)}s.done?t(i):Promise.resolve(i).then(a,o)}function t(t){return function(){var n=this,a=arguments;return new Promise(function(o,r){var c=t.apply(n,a);function s(t){e(c,o,r,s,i,"next",t)}function i(t){e(c,o,r,s,i,"throw",t)}s(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var r="https://image.tmdb.org/t/p/w185_and_h278_bestv2",c=document.querySelector(".left-menu"),s=document.querySelector(".hamburger"),i=document.querySelector(".tv-shows__list"),u=document.querySelector(".modal"),l=document.querySelector(".tv-shows"),d=document.querySelector(".tv-card__img"),v=document.querySelector(".modal__title"),p=document.querySelector(".genres-list"),g=document.querySelector(".rating"),h=document.querySelector(".description"),f=document.querySelector(".modal__link"),m=document.querySelector(".search__form"),y=document.querySelector(".search__form-input"),_=document.querySelector(".preloader"),E=document.querySelectorAll(".dropdown"),k=document.querySelector(".tv-shows__head"),S=document.querySelector(".poster__wrapper"),L=document.querySelector(".modal__content"),R=document.querySelector(".pagination"),w=document.createElement("div");w.className="loading";var b=function(){function e(){n(this,e),this.SERVER="https://api.themoviedb.org/3",this.API_KEY="624e6ae26e572199a15bbde6c428ca8c"}return o(e,[{key:"getData",value:function(){var e=t(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.append(w),e.next=3,fetch(t);case 3:if(!(n=e.sent).ok){e.next=8;break}return e.abrupt("return",n.json());case 8:throw new Error("Не удалось получить данные по адресу ".concat(t));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"getTestDate",value:function(){return this.getData("test.json")}},{key:"getTestCard",value:function(){return this.getData("card.json")}},{key:"getSearchResult",value:function(e){return this.temp="".concat(this.SERVER,"/search/tv?api_key=").concat(this.API_KEY,"&language=ru-RU&query=").concat(e),this.getData(this.temp)}},{key:"getNextPage",value:function(e){return this.getData(this.temp+"&page="+e)}},{key:"getTvShow",value:function(e){this.getData("".concat(this.SERVER,"/tv/").concat(e,"?api_key=").concat(this.API_KEY,"&language=ru-RU"))}},{key:"getTopRated",value:function(){this.getData("".concat(this.SERVER,"/tv/top_rated?api_key=").concat(this.API_KEY,"&language=ru-RU"))}},{key:"getPopular",value:function(){this.getData("".concat(this.SERVER,"/tv/popular?api_key=").concat(this.API_KEY,"&language=ru-RU"))}},{key:"getToday",value:function(){this.getData("".concat(this.SERVER,"/tv/airing_today?api_key=").concat(this.API_KEY,"&language=ru-RU"))}},{key:"getWeek",value:function(){this.getData("".concat(this.SERVER,"/tv/on_the_air?api_key=").concat(this.API_KEY,"&language=ru-RU"))}}]),e}(),x=new b,q=function(e,t){if(i.textContent="",!e.total_results)return w.remove(),k.textContent="К сожалению по вашему запросу не чего не найдено ...",void(k.style.cssText="color: red; font-size: 30px;");if(k.textContent=t?t.textContent:"Результат поиска",k.style.cssText="color: green;",e.results.forEach(function(e){var t=e.backdrop_path,n=e.name,a=e.poster_path,o=e.vote_average,c=e.id,s=a?r+a:"img/no-poster.jpg",u=t?r+t:"",l=o?'<span class="tv-card__vote">'.concat(o,"</span>"):"",d=document.createElement("li");d.idTV=c,d.className="tv-shows__item",d.innerHTML='\n      <a href="#" id="'.concat(c,'" class="tv-card">\n      ').concat(l,'\n      <img class="tv-card__img"\n        src="').concat(s,'"\n        data-backdrop="').concat(u,'"\n        alt="').concat(n,'">\n      <h4 class="tv-card__head">').concat(n,"</h4>\n      </a>\n    "),w.remove(),i.append(d)}),R.textContent="",!t&&e.total_pages>1)for(var n=1;n<=e.total_pages;n++)R.innerHTML+='<li><a href="#" class="pages">'.concat(n,"</a></li>")};m.addEventListener("submit",function(e){e.preventDefault();var t=y.value.trim();y.value="",t&&x.getSearchResult(t).then(q),y.value=""});var D=function(){E.forEach(function(e){e.classList.remove("active")})};s.addEventListener("click",function(){c.classList.toggle("openMenu"),s.classList.toggle("open")}),document.addEventListener("click",function(e){e.target.closest(".left-menu")||(c.classList.remove("openMenu"),s.classList.remove("open"),D())}),c.addEventListener("click",function(e){e.preventDefault();var t=e.target,n=t.closest(".dropdown");n&&(n.classList.toggle("active"),c.classList.add("openMenu"),s.classList.add("open")),t.closest("#top-rated")&&x.getTopRated().then(function(e){return q(e,t)}),t.closest("#popular")&&x.getPopular().then(function(e){return q(e,t)}),t.closest("#week")&&x.getWeek().then(function(e){return q(e,t)}),t.closest("#today")&&x.getToday().then(function(e){return q(e,t)}),t.closest("#search")&&(i.textContent="",k.textContent="")}),i.addEventListener("click",function(e){e.preventDefault();var t=e.target.closest(".tv-card");t&&(_.style.display="block",x.getTvShow(t.id).then(function(e){var t=e.poster_path,n=e.name,a=e.genres,o=e.vote_average,c=e.overview,s=e.homepage;t?(d.src=r+t,d.alt=n,S.style.display="",L.style.paddingLeft=""):(S.style.display="none",L.style.paddingLeft="25px"),v.textContent=n,p.textContent="",a.forEach(function(e){p.innerHTML+="<li>".concat(e.name,"</li>")}),g.textContent=o,h.textContent=c,f.href=s}).then(function(){document.body.style.overflow="hidden",u.classList.remove("hide")}).finally(function(){_.style.display=""}))}),u.addEventListener("click",function(e){var t=e.target.closest(".cross"),n=e.target.classList.contains("modal");(t||n)&&(document.body.style.overflow="",u.classList.add("hide"),w.remove())});var T=function(e){var t=e.target.closest(".tv-shows__item");if(t){var n=t.querySelector(".tv-card__img");if(n.dataset.backdrop){var a=[n.dataset.backdrop,n.src];n.src=a[0],n.dataset.backdrop=a[1]}}};i.addEventListener("mouseover",T),i.addEventListener("mouseout",T),R.addEventListener("click",function(e){e.preventDefault();var t=e.target;t.classList.contains("pages")&&(l.append(w),x.getNextPage(t.textContent).then(q))});
},{}]},{},["KIzB"], null)
//# sourceMappingURL=main.9fdb98a5.js.map